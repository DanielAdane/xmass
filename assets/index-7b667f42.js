(function(){var P={},p="";try{p=location.hash.toString()}catch{}var g=D(p),M=J("initParams");if(M)for(var a in M)typeof g[a]>"u"&&(g[a]=M[a]);H("initParams",g);var k=!1,C;try{if(k=window.parent!=null&&window!=window.parent,k){window.addEventListener("message",function(n){if(n.source===window.parent){try{var s=JSON.parse(n.data)}catch{return}!s||!s.eventType||(s.eventType=="set_custom_style"?C.innerHTML=s.eventData:W(s.eventType,s.eventData))}}),C=document.createElement("style"),document.head.appendChild(C);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready"}),"*")}catch{}}}catch{}function v(n){try{return n=n.replace(/\+/g,"%20"),decodeURIComponent(n)}catch{return n}}function D(n){n=n.replace(/^#/,"");var s={};if(!n.length)return s;if(n.indexOf("=")<0&&n.indexOf("?")<0)return s._path=v(n),s;var u=n.indexOf("?");if(u>=0){var c=n.substr(0,u);s._path=v(c),n=n.substr(u+1)}var _=m(n);for(var T in _)s[T]=_[T];return s}function m(n){var s={};if(!n.length)return s;var u=n.split("&"),c,_,T,O;for(c=0;c<u.length;c++)_=u[c].split("="),T=v(_[0]),O=_[1]==null?null:v(_[1]),s[T]=O;return s}function N(n,s){var u=n.indexOf("#");if(u<0)return n+"#"+s;var c=n.substr(u+1);return c.indexOf("=")>=0||c.indexOf("?")>=0?n+"&"+s:c.length>0?n+"?"+s:n+s}function U(n,s,u){if(s||(s=function(){}),u===void 0&&(u=""),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(n,JSON.stringify(u)),s();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:n,eventData:u})),s();else if(k)try{var c="https://web.telegram.org";c="*",window.parent.postMessage(JSON.stringify({eventType:n,eventData:u}),c),g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",n,u),s()}catch(_){s(_)}else g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",n,u),s({notAvailable:!0})}function W(n,s){Q(n,function(u){u(n,s)})}function Q(n,s){var u=P[n];if(!(u===void 0||!u.length))for(var c=0;c<u.length;c++)try{s(u[c])}catch{}}function I(n,s){P[n]===void 0&&(P[n]=[]);var u=P[n].indexOf(s);u===-1&&P[n].push(s)}function $(n,s){if(P[n]!==void 0){var u=P[n].indexOf(s);u!==-1&&P[n].splice(u,1)}}function H(n,s){try{return window.sessionStorage.setItem("__telegram__"+n,JSON.stringify(s)),!0}catch{}return!1}function J(n){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+n))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:g,isIframe:k,onEvent:I,offEvent:$,postEvent:U,receiveEvent:W,callEventCallbacks:Q},window.Telegram.Utils={urlSafeDecode:v,urlParseQueryString:m,urlParseHashParams:D,urlAppendHashParams:N,sessionStorageSet:H,sessionStorageGet:J},window.TelegramGameProxy_receiveEvent=W,window.TelegramGameProxy={receiveEvent:W}})();(function(){var P=window.Telegram.Utils,p=window.Telegram.WebView,g=p.initParams,M=p.isIframe,a={},k="",C={},v={},D="light",m="6.0",N="unknown";if(g.tgWebAppData&&g.tgWebAppData.length){k=g.tgWebAppData,C=P.urlParseQueryString(k);for(var U in C){var W=C[U];try{(W.substr(0,1)=="{"&&W.substr(-1)=="}"||W.substr(0,1)=="["&&W.substr(-1)=="]")&&(C[U]=JSON.parse(W))}catch{}}}if(g.tgWebAppThemeParams&&g.tgWebAppThemeParams.length){var Q=g.tgWebAppThemeParams;try{var I=JSON.parse(Q);I&&G(I)}catch{}}var I=P.sessionStorageGet("themeParams");I&&G(I),g.tgWebAppVersion&&(m=g.tgWebAppVersion),g.tgWebAppPlatform&&(N=g.tgWebAppPlatform);function $(e,t){t.theme_params&&(G(t.theme_params),window.Telegram.WebApp.MainButton.setParams({}),Z(),c("themeChanged"))}var H=window.innerHeight;function J(e,t){t.height&&(window.removeEventListener("resize",n),K(t))}function n(e){H!=window.innerHeight&&(H=window.innerHeight,c("viewportChanged",{isStateStable:!0}))}function s(e){if(!(e.metaKey||e.ctrlKey)){for(var t=e.target;t.tagName!="A"&&t.parentNode;)t=t.parentNode;t.tagName=="A"&&t.target!="_blank"&&(t.protocol=="http:"||t.protocol=="https:")&&t.hostname=="t.me"&&(a.openTgLink(t.href),e.preventDefault())}}function u(e){return e.toString().replace(/^\s+|\s+$/g,"")}function c(e){var t=Array.prototype.slice.call(arguments);e=t.shift(),p.callEventCallbacks("webview:"+e,function(r){r.apply(a,t)})}function _(e,t){p.onEvent("webview:"+e,t)}function T(e,t){p.offEvent("webview:"+e,t)}function O(e,t){var r=document.documentElement;r&&r.style&&r.style.setProperty&&r.style.setProperty("--tg-"+e,t)}function G(e){e.bg_color=="#1c1c1d"&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e");var t;for(var r in e)(t=V(e[r]))&&(v[r]=t,r=="bg_color"&&(D=ce(t)?"dark":"light",O("color-scheme",D)),r="theme-"+r.split("_").join("-"),O(r,t));P.sessionStorageSet("themeParams",v)}function se(e){for(var t="",r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=r.length,f=0;f<e;f++)t+=r[Math.floor(Math.random()*o)];return t}var j=!1,q=!1,ee=!0;function K(e){typeof e<"u"&&(ee=!!e.is_expanded,j=e.height,e.is_state_stable&&(q=e.height),c("viewportChanged",{isStateStable:!!e.is_state_stable}));var t,r;j!==!1?t=j-A+"px":t=A?"calc(100vh - "+A+"px)":"100vh",q!==!1?r=q-A+"px":r=A?"calc(100vh - "+A+"px)":"100vh",O("viewport-height",t),O("viewport-stable-height",r)}var X=!1;function le(e){if(!w("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+m);return}X=!!e,p.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:X})}var te="bg_color";function pe(){return v[te]||null}function ue(e){if(!w("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+m);return}var t;if(e=="bg_color"||e=="secondary_bg_color"?t=e:(t=V(e),v.bg_color&&v.bg_color==t?t="bg_color":v.secondary_bg_color&&v.secondary_bg_color==t?t="secondary_bg_color":t=!1),t!="bg_color"&&t!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");te=t,p.postEvent("web_app_set_header_color",!1,{color_key:t})}var R="bg_color";function re(){return R=="secondary_bg_color"?v.secondary_bg_color:R=="bg_color"?v.bg_color:R}function fe(e){if(!w("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+m);return}var t;if(e=="bg_color"||e=="secondary_bg_color")t=e;else if(t=V(e),!t)throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");R=t,Z()}var ne=null;function Z(){var e=re();ne!=e&&(ne=e,p.postEvent("web_app_set_background_color",!1,{color:e}))}function V(e){e+="";var t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var r=parseInt(t[1]),o=parseInt(t[2]),f=parseInt(t[3]);return r=(r<16?"0":"")+r.toString(16),o=(o<16?"0":"")+o.toString(16),f=(f<16?"0":"")+f.toString(16),"#"+r+o+f}return!1}function ce(e){e=e.replace(/[\s#]/g,""),e.length==3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),f=Math.sqrt(.299*(t*t)+.587*(r*r)+.114*(o*o));return f<120}function de(e,t){typeof e!="string"&&(e=""),typeof t!="string"&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");var r=Math.max(e.length,t.length),o,f,y;for(o=0;o<r;o++)if(f=parseInt(e[o])||0,y=parseInt(t[o])||0,f!=y)return f>y?1:-1;return 0}function w(e){return de(m,e)>=0}function be(e){if(window.Blob)try{return new Blob([e]).size}catch{}for(var t=e.length,r=e.length-1;r>=0;r--){var o=e.charCodeAt(r);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&r--}return t}var ge=function(){var e=!1,t={};Object.defineProperty(t,"isVisible",{set:function(d){b({is_visible:d})},get:function(){return e},enumerable:!0});var r=null;p.onEvent("back_button_pressed",o);function o(){c("backButtonClicked")}function f(){return{is_visible:e}}function y(d){return typeof d>"u"&&(d=f()),JSON.stringify(d)}function l(){return w("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+m),!1)}function E(){var d=f(),h=y(d);r!==h&&(r=h,p.postEvent("web_app_setup_back_button",!1,d))}function b(d){return l()&&(typeof d.is_visible<"u"&&(e=!!d.is_visible),E()),t}return t.onClick=function(d){return l()&&_("backButtonClicked",d),t},t.offClick=function(d){return l()&&T("backButtonClicked",d),t},t.show=function(){return b({is_visible:!0})},t.hide=function(){return b({is_visible:!1})},t}(),A=0,ve=function(){var e=!1,t=!0,r=!1,o="CONTINUE",f=!1,y=!1,l={};Object.defineProperty(l,"text",{set:function(i){l.setParams({text:i})},get:function(){return o},enumerable:!0}),Object.defineProperty(l,"color",{set:function(i){l.setParams({color:i})},get:function(){return f||v.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(l,"textColor",{set:function(i){l.setParams({text_color:i})},get:function(){return y||v.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(l,"isVisible",{set:function(i){l.setParams({is_visible:i})},get:function(){return e},enumerable:!0}),Object.defineProperty(l,"isProgressVisible",{get:function(){return r},enumerable:!0}),Object.defineProperty(l,"isActive",{set:function(i){l.setParams({is_active:i})},get:function(){return t},enumerable:!0});var E=null;p.onEvent("main_button_pressed",S);var b=null,d={};if(g.tgWebAppDebug){b=document.createElement("tg-main-button"),d={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var h in d)b.style[h]=d[h];document.addEventListener("DOMContentLoaded",function i(x){document.removeEventListener("DOMContentLoaded",i),document.body.appendChild(b),b.addEventListener("click",S,!1)})}function S(){t&&c("mainButtonClicked")}function oe(){var i=l.color,x=l.textColor;return e?{is_visible:!0,is_active:t,is_progress_visible:r,text:o,color:i,text_color:x}:{is_visible:!1}}function Ee(i){return typeof i>"u"&&(i=oe()),JSON.stringify(i)}function Y(){var i=oe(),x=Ee(i);E!==x&&(E=x,p.postEvent("web_app_setup_main_button",!1,i),g.tgWebAppDebug&&We(i))}function We(i){i.is_visible?(b.style.display="block",A=48,b.style.opacity=i.is_active?"1":"0.8",b.style.cursor=i.is_active?"pointer":"auto",b.disabled=!i.is_active,b.innerText=i.text,b.style.backgroundImage=i.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",b.style.backgroundColor=i.color,b.style.color=i.text_color):(b.style.display="none",A=0),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=A+"px"),K()}function xe(i){if(typeof i.text<"u"){var x=u(i.text);if(!x.length)throw console.error("[Telegram.WebApp] Main button text is required",i.text),Error("WebAppMainButtonParamInvalid");if(x.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",x),Error("WebAppMainButtonParamInvalid");o=x}if(typeof i.color<"u")if(i.color===!1||i.color===null)f=!1;else{var ie=V(i.color);if(!ie)throw console.error("[Telegram.WebApp] Main button color format is invalid",i.color),Error("WebAppMainButtonParamInvalid");f=ie}if(typeof i.text_color<"u")if(i.text_color===!1||i.text_color===null)y=!1;else{var ae=V(i.text_color);if(!ae)throw console.error("[Telegram.WebApp] Main button text color format is invalid",i.text_color),Error("WebAppMainButtonParamInvalid");y=ae}if(typeof i.is_visible<"u"){if(i.is_visible&&!l.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e=!!i.is_visible}return typeof i.is_active<"u"&&(t=!!i.is_active),Y(),l}return l.setText=function(i){return l.setParams({text:i})},l.onClick=function(i){return _("mainButtonClicked",i),l},l.offClick=function(i){return T("mainButtonClicked",i),l},l.show=function(){return l.setParams({is_visible:!0})},l.hide=function(){return l.setParams({is_visible:!1})},l.enable=function(){return l.setParams({is_active:!0})},l.disable=function(){return l.setParams({is_active:!1})},l.showProgress=function(i){return t=!!i,r=!0,Y(),l},l.hideProgress=function(){return l.isActive||(t=!0),r=!1,Y(),l},l.setParams=xe,l}();function me(){c("settingsButtonClicked")}p.onEvent("settings_button_pressed",me);var he=function(){var e={};function t(r){if(!w("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+m),e;if(r.type=="impact"){if(r.impact_style!="light"&&r.impact_style!="medium"&&r.impact_style!="heavy"&&r.impact_style!="rigid"&&r.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",r.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(r.type=="notification"){if(r.notification_type!="error"&&r.notification_type!="success"&&r.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",r.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(r.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",r.type),Error("WebAppHapticFeedbackTypeInvalid");return p.postEvent("web_app_trigger_haptic_feedback",!1,r),e}return e.impactOccurred=function(r){return t({type:"impact",impact_style:r})},e.notificationOccurred=function(r){return t({type:"notification",notification_type:r})},e.selectionChanged=function(){return t({type:"selection_change"})},e}(),F={};function _e(e,t){if(t.slug&&F[t.slug]){var r=F[t.slug];delete F[t.slug],r.callback&&r.callback(t.status),c("invoiceClosed",{url:r.url,status:t.status})}}var L=!1;function we(e,t){if(L){var r=L;L=!1;var o=null;typeof t.button_id<"u"&&(o=t.button_id),r.callback&&r.callback(o),c("popupClosed",{button_id:o})}}var B=!1;function ye(e,t){if(B){var r=B,o=null;typeof t.data<"u"&&(o=t.data),r.callback&&r.callback(o)&&(B=!1,p.postEvent("web_app_close_scan_qr_popup",!1)),c("qrTextReceived",{data:o})}}function Pe(e,t){B=!1}var z={};function Ae(e,t){if(t.req_id&&z[t.req_id]){var r=z[t.req_id];delete z[t.req_id];var o=null;typeof t.data<"u"&&(o=t.data),r.callback&&r.callback(o),c("clipboardTextReceived",{data:o})}}window.Telegram||(window.Telegram={}),Object.defineProperty(a,"initData",{get:function(){return k},enumerable:!0}),Object.defineProperty(a,"initDataUnsafe",{get:function(){return C},enumerable:!0}),Object.defineProperty(a,"version",{get:function(){return m},enumerable:!0}),Object.defineProperty(a,"platform",{get:function(){return N},enumerable:!0}),Object.defineProperty(a,"colorScheme",{get:function(){return D},enumerable:!0}),Object.defineProperty(a,"themeParams",{get:function(){return v},enumerable:!0}),Object.defineProperty(a,"isExpanded",{get:function(){return ee},enumerable:!0}),Object.defineProperty(a,"viewportHeight",{get:function(){return(j===!1?window.innerHeight:j)-A},enumerable:!0}),Object.defineProperty(a,"viewportStableHeight",{get:function(){return(q===!1?window.innerHeight:q)-A},enumerable:!0}),Object.defineProperty(a,"isClosingConfirmationEnabled",{set:function(e){le(e)},get:function(){return X},enumerable:!0}),Object.defineProperty(a,"headerColor",{set:function(e){ue(e)},get:function(){return pe()},enumerable:!0}),Object.defineProperty(a,"backgroundColor",{set:function(e){fe(e)},get:function(){return re()},enumerable:!0}),Object.defineProperty(a,"BackButton",{value:ge,enumerable:!0}),Object.defineProperty(a,"MainButton",{value:ve,enumerable:!0}),Object.defineProperty(a,"HapticFeedback",{value:he,enumerable:!0}),a.setHeaderColor=function(e){a.headerColor=e},a.setBackgroundColor=function(e){a.backgroundColor=e},a.enableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!0},a.disableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!1},a.isVersionAtLeast=function(e){return w(e)},a.onEvent=function(e,t){_(e,t)},a.offEvent=function(e,t){T(e,t)},a.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(be(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");p.postEvent("web_app_data_send",!1,{data:e})},a.openLink=function(o,t){var r=document.createElement("A");if(r.href=o,r.protocol!="http:"&&r.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",o),Error("WebAppTgUrlInvalid");var o=r.href;t=t||{},w("6.1")?p.postEvent("web_app_open_link",!1,{url:o,try_instant_view:w("6.4")&&!!t.try_instant_view}):window.open(o,"_blank")},a.openTelegramLink=function(e){var t=document.createElement("A");if(t.href=e,t.protocol!="http:"&&t.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if(t.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var r=t.pathname+t.search;M||w("6.1")?p.postEvent("web_app_open_tg_link",!1,{path_full:r}):location.href="https://t.me"+r},a.openInvoice=function(e,t){var r=document.createElement("A"),o,f;if(r.href=e,r.protocol!="http:"&&r.protocol!="https:"||r.hostname!="t.me"||!(o=r.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(f=o[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!w("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+m),Error("WebAppMethodUnsupported");if(F[f])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");F[f]={url:e,callback:t},p.postEvent("web_app_open_invoice",!1,{slug:f})},a.showPopup=function(e,t){if(!w("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+m),Error("WebAppMethodUnsupported");if(L)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var r="",o="",f=[],y={};if(typeof e.title<"u"){if(r=u(e.title),r.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",r),Error("WebAppPopupParamInvalid");r.length>0&&(y.title=r)}if(typeof e.message<"u"&&(o=u(e.message)),!o.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(o.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",o),Error("WebAppPopupParamInvalid");if(y.message=o,typeof e.buttons<"u"){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(var l=0;l<e.buttons.length;l++){var E=e.buttons[l],b={},d="";if(typeof E.id<"u"&&(d=E.id.toString(),d.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",d),Error("WebAppPopupParamInvalid");b.id=d;var h=E.type;if(typeof h>"u"&&(h="default"),b.type=h,!(h=="ok"||h=="close"||h=="cancel"))if(h=="default"||h=="destructive"){var S="";if(typeof E.text<"u"&&(S=u(E.text)),!S.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+h,E.text),Error("WebAppPopupParamInvalid");if(S.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",S),Error("WebAppPopupParamInvalid");b.text=S}else throw console.error("[Telegram.WebApp] Popup button type is invalid",h),Error("WebAppPopupParamInvalid");f.push(b)}}else f.push({id:"",type:"close"});if(f.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(f.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");y.buttons=f,L={callback:t},p.postEvent("web_app_open_popup",!1,y)},a.showAlert=function(e,t){a.showPopup({message:e},t?function(){t()}:null)},a.showConfirm=function(e,t){a.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},t?function(r){t(r=="ok")}:null)},a.showScanQrPopup=function(e,t){if(!w("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+m),Error("WebAppMethodUnsupported");if(B)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var r="",o={};if(typeof e.text<"u"){if(r=u(e.text),r.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",r),Error("WebAppScanQrPopupParamInvalid");r.length>0&&(o.text=r)}B={callback:t},p.postEvent("web_app_open_scan_qr_popup",!1,o)},a.closeScanQrPopup=function(){if(!w("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+m),Error("WebAppMethodUnsupported");B=!1,p.postEvent("web_app_close_scan_qr_popup",!1)},a.readTextFromClipboard=function(e){if(!w("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+m),Error("WebAppMethodUnsupported");var t=se(16),r={req_id:t};z[t]={callback:e},p.postEvent("web_app_read_text_from_clipboard",!1,r)},a.ready=function(){p.postEvent("web_app_ready")},a.expand=function(){p.postEvent("web_app_expand")},a.close=function(){p.postEvent("web_app_close")},window.Telegram.WebApp=a,Z(),K(),window.addEventListener("resize",n),M&&document.addEventListener("click",s),p.onEvent("theme_changed",$),p.onEvent("viewport_changed",J),p.onEvent("invoice_closed",_e),p.onEvent("popup_closed",we),p.onEvent("qr_text_received",ye),p.onEvent("scan_qr_popup_closed",Pe),p.onEvent("clipboard_text_received",Ae),p.postEvent("web_app_request_theme"),p.postEvent("web_app_request_viewport")})();var Ce=window,Te=Ce.Telegram.WebApp;export{Te as default};
